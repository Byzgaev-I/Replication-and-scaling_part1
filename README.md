# Домашнее задание «Репликация и масштабирование. Часть 1»

## Задание 1
- На лекции рассматривались режимы репликации master-slave, master-master, опишите их различия.  
- Ответить в свободной форме.

### Выполнение

Различия между режимами репликации:  
Режим репликации с главным и подчинённым серверами (master и slave):    
В этом режиме один сервер выполняет роль главного, а один или несколько серверов работают как подчинённые.   
Главный сервер принимает все изменения данных (вставка, обновление, удаление), а подчинённые серверы автоматически копируют эти изменения и применяют их у себя.
Подчинённые серверы работают только на чтение. Если главный сервер выходит из строя, нужно вручную переключиться на один из подчинённых серверов и назначить его новым главным. 
Этот режим отлично подходит для распределения нагрузки по чтению данных и создания резервных копий.  

Режим репликации с двумя главными серверами (master и master):
В этом режиме оба сервера являются главными одновременно.  
Каждый из них может принимать изменения данных, и эти изменения автоматически копируются на другой сервер.    
Оба сервера работают на чтение и запись.   
Если один сервер падает, второй продолжает работать без необходимости вмешательства администратора.
Однако здесь возникает риск конфликтов: если на обоих серверах одновременно изменяют одни и те же данные, могут возникнуть проблемы с согласованностью.   
Этот режим используется для обеспечения высокой доступности и распределения нагрузки по записи данных.    

Ключевые различия:  
• В первом режиме только один сервер принимает изменения, во втором оба сервера могут изменять данные.   
• Первый режим проще настроить и поддерживать, второй требует дополнительных мер для предотвращения конфликтов.  
• Первый режим требует ручного переключения при отказе главного сервера, второй обеспечивает автоматическую отказоустойчивость.  
• Первый режим лучше для чтения большого объема данных, второй для распределения нагрузки по записи.  


### Задание 2  

- Выполните конфигурацию master-slave репликации, примером можно пользоваться из лекции.  
- Приложите скриншоты конфигурации, выполнения работы: состояния и режимы работы серверов.  

### Выполнение:  

- Создаём рабочую директорию
- Создаём конфигурацию Master
- Создаём конфигурацию Slave
- Создаём docker-compose.yml

### Структура:
![image](https://github.com/Byzgaev-I/Replication-and-scaling_part1/blob/main/БД1.png)

### docker-compose.yml
![image](https://github.com/Byzgaev-I/Replication-and-scaling_part1/blob/main/БД2.png) 

### Конфигурация Master
![image](https://github.com/Byzgaev-I/Replication-and-scaling_part1/blob/main/БД3.png)

### Конфигурация Slave
![image](https://github.com/Byzgaev-I/Replication-and-scaling_part1/blob/main/БД4.png)


Запускаем контейнеры и ждем инициализации

![image](https://github.com/Byzgaev-I/Replication-and-scaling_part1/blob/main/Этап%2021-22.png)

Проверяем логи

![image](https://github.com/Byzgaev-I/Replication-and-scaling_part1/blob/main/2-3%20логи.png)


### Настройка Master сервера

 Входим в Master
```bash
docker exec -it mysql-master mariadb -uroot -prootpass123
```
Создаём пользователя для репликации

Выполняем в консоли MariaDB:
```sql
CREATE USER 'replica_user'@'%' IDENTIFIED BY 'replica_pass123';
```
```sql
GRANT REPLICATION SLAVE ON __.__ TO 'replica_user'@'%';
```
```sql
FLUSH PRIVILEGES;
```
```sql
SHOW MASTER STATUS;
```



































